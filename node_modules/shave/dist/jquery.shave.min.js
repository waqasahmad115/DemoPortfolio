!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function E(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function S(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||((i=i||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function n(e,t,n){if(void 0===n&&(n={}),void 0===t||isNaN(t))throw Error("maxHeight is required");var i="string"==typeof(a=e)?S([],E(document.querySelectorAll(a)),!1):"length"in a?S([],E(a),!1):[a];if(i.length){var r,o=n.character,e=void 0===o?"&mldr;":o,a=n.classname,l=void 0===a?"js-shave":a,o=n.spaces,a=void 0===o||o,o=n.charclassname,c=void 0===o?"js-shave-char":o,n=n.link,s=void 0===n?{}:n,f="boolean"!=typeof a||a,a=s&&"{}"!==JSON.stringify(s)&&s.href,e=a&&s.textContent?s.textContent:e,d=document.createElement(a?"a":"span"),h={textContent:e,className:c};for(r in h)d[r]=h[r];if(a)for(var u in s)d[u]=s[u];for(var v=0;v<i.length;v+=1){var y=i[v],m=y.style,g=y.querySelector("."+l),p=void 0===y.textContent?"innerText":"textContent";g&&(y.removeChild(y.querySelector("."+c)),y[p]=y[p]);var x=y[p],w=f?x.split(" "):x;if(!(w.length<2)){var j=m.height;m.height="auto";var C=m.maxHeight;if(m.maxHeight="none",y.offsetHeight<=t)m.height=j,m.maxHeight=C;else{for(var H,b=w.length-1,A=0;A<b;)H=A+b+1>>1,y[p]=f?w.slice(0,H).join(" "):w.slice(0,H),y.insertAdjacentElement("beforeend",d),y.offsetHeight>t?b=H-1:A=H;y[p]=f?w.slice(0,b).join(" "):w.slice(0,b),y.insertAdjacentElement("beforeend",d);g=f?" "+w.slice(b).join(" "):w.slice(b),x=document.createTextNode(g),g=document.createElement("span");g.classList.add(l),g.style.display="none",g.appendChild(x),y.insertAdjacentElement("beforeend",g),m.height=j,m.maxHeight=C}}}}}var e;"undefined"==typeof window||(e=window.$||window.jQuery||window.Zepto)&&(e.fn.shave=function(e,t){return n(this,e,t),this})});
